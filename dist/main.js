(()=>{"use strict";var t={989:function(t,e,a){var n=this&&this.__awaiter||function(t,e,a,n){return new(a||(a=Promise))((function(o,l){function s(t){try{c(n.next(t))}catch(t){l(t)}}function i(t){try{c(n.throw(t))}catch(t){l(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(s,i)}c((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const o=a(55),l=a(155),s=a(822);(0,s.setupCloseModalHandlers)(),document.getElementById("searchButton").addEventListener("click",(()=>n(void 0,void 0,void 0,(function*(){const t=document.getElementById("playerName").value;if(t){const e=yield(0,o.fetchPlayerId)(t);if(e){(0,s.openModal)("chooseModal");const t=document.getElementById("mainStatsButton"),a=document.getElementById("battleStatsButton"),i=document.getElementById("clanStatsButton");t.onclick=()=>n(void 0,void 0,void 0,(function*(){const t=yield(0,o.fetchPlayerStats)(e);if(t){const e=t.clan_id?yield(0,o.fetchClanStats)(t.clan_id):null;(0,s.closeModal)("chooseModal"),(0,s.openModal)("resultModal"),(0,l.displayMainAccountStats)(t,e)}})),a.onclick=()=>n(void 0,void 0,void 0,(function*(){const t=yield(0,o.fetchPlayerStats)(e);t&&((0,s.closeModal)("chooseModal"),(0,s.openModal)("resultModal"),(0,l.displayBattleEfficiencyStats)(t))})),i.onclick=()=>n(void 0,void 0,void 0,(function*(){const t=yield(0,o.fetchPlayerStats)(e);if(t&&t.clan_id){const e=yield(0,o.fetchClanStats)(t.clan_id);e&&((0,s.closeModal)("chooseModal"),(0,s.openModal)("resultModal"),(0,l.displayClanStats)(e))}else(0,s.closeModal)("chooseModal"),(0,s.openModal)("resultModal"),(0,l.displayMessage)("Player is not in a clan")}))}}else(0,s.openModal)("resultModal"),(0,l.displayMessage)("Please enter a player name")}))))},55:function(t,e,a){var n=this&&this.__awaiter||function(t,e,a,n){return new(a||(a=Promise))((function(o,l){function s(t){try{c(n.next(t))}catch(t){l(t)}}function i(t){try{c(n.throw(t))}catch(t){l(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof a?e:new a((function(t){t(e)}))).then(s,i)}c((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.fetchClanStats=e.fetchPlayerStats=e.fetchPlayerId=void 0;const o=a(822),l=a(155),s="d889298af2382fa0cfeb010e26874b63";e.fetchPlayerId=t=>n(void 0,void 0,void 0,(function*(){try{const e=yield fetch(`https://api.worldoftanks.eu/wot/account/list/?application_id=${s}&search=${t}`),a=yield e.json();return"ok"===a.status&&a.data.length>0?a.data[0].account_id:((0,o.openModal)("resultModal"),(0,l.displayMessage)("Player not found"),null)}catch(t){return(0,o.openModal)("resultModal"),(0,l.displayMessage)("Error fetching player ID"),null}})),e.fetchPlayerStats=t=>n(void 0,void 0,void 0,(function*(){try{const e=yield fetch(`https://api.worldoftanks.eu/wot/account/info/?application_id=${s}&account_id=${t}`),a=yield e.json();return"ok"===a.status?a.data[t]:((0,o.openModal)("resultModal"),(0,l.displayMessage)("Error fetching player stats"),null)}catch(t){return(0,o.openModal)("resultModal"),(0,l.displayMessage)("Error fetching player stats"),null}})),e.fetchClanStats=t=>n(void 0,void 0,void 0,(function*(){try{const e=yield fetch(`https://api.worldoftanks.eu/wgn/clans/info/?application_id=${s}&clan_id=${t}`),a=yield e.json();if("ok"===a.status){const e=a.data[t];return{tag:e.tag,name:e.name,members_count:e.members_count,created_at:e.created_at,description:e.description}}return(0,o.openModal)("resultModal"),(0,l.displayMessage)("Error fetching clan stats"),null}catch(t){return(0,o.openModal)("resultModal"),(0,l.displayMessage)("Error fetching clan stats"),null}}))},155:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.displayClanStats=e.displayBattleEfficiencyStats=e.displayMainAccountStats=e.displayMessage=void 0,e.displayMessage=t=>{document.getElementById("results").innerHTML=`<p>${t}</p>`},e.displayMainAccountStats=(t,e)=>{const a=document.getElementById("results"),n=(t.statistics.all.wins/t.statistics.all.battles*100).toFixed(2);a.innerHTML=`\n        <p>Nickname: ${t.nickname}</p>\n        <p>Battles: ${t.statistics.all.battles}</p>\n        <p>Win Rate: ${n}%</p>\n        <p>Clan: ${e?e.name:"No clan"}</p>\n    `},e.displayBattleEfficiencyStats=t=>{const e=document.getElementById("results"),a=(t.statistics.all.damage_dealt/t.statistics.all.battles).toFixed(2),n=(t.statistics.all.xp/t.statistics.all.battles).toFixed(2);e.innerHTML=`\n        <p>Hit Percentage: ${t.statistics.all.hits_percents}%</p>\n        <p>Average Damage: ${a}</p>\n        <p>Average Experience: ${n}</p>\n        <p>Max Frags in a Battle: ${t.statistics.all.max_frags}</p>\n        <p>Max Experience in a Battle: ${t.statistics.all.max_xp}</p>\n    `},e.displayClanStats=t=>{const e=document.getElementById("results"),a=new Date(1e3*t.created_at).toLocaleDateString();e.innerHTML=`\n        <p>Members Count: ${t.members_count}</p>\n        <p>Created At: ${a}</p>\n        <p>Description: ${t.description}</p>\n    `}},822:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setupCloseModalHandlers=e.closeModal=e.openModal=void 0,e.openModal=t=>{document.getElementById(t).style.display="block"},e.closeModal=t=>{document.getElementById(t).style.display="none"},e.setupCloseModalHandlers=()=>{const t=document.getElementsByClassName("close");for(let a=0;a<t.length;a++)t[a].addEventListener("click",(function(){var t,a;(0,e.closeModal)(null===(a=null===(t=this.parentElement)||void 0===t?void 0:t.parentElement)||void 0===a?void 0:a.id)}));window.onclick=function(t){const a=document.getElementById("chooseModal"),n=document.getElementById("resultModal");t.target==a&&(0,e.closeModal)("chooseModal"),t.target==n&&(0,e.closeModal)("resultModal")}}}},e={};!function a(n){var o=e[n];if(void 0!==o)return o.exports;var l=e[n]={exports:{}};return t[n].call(l.exports,l,l.exports,a),l.exports}(989)})();